

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.5.2. Natural Guide Star Adaptive Optics (NGSAO) &mdash; GMT Software And Controls documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/additional_style.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="GMT Software And Controls documentation" href="../../../index.html"/>
        <link rel="up" title="3. Telescope Control System" href="../tcs_introduction.html"/>
        <link rel="next" title="3.5.3. Laser Tomographic Adaptive Optics (LTAO)" href="ltao_obsmode.html"/>
        <link rel="prev" title="3.5.1. Natural Seeing Observing Mode" href="ns_obsmode.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> GMT Software And Controls
          

          
            
            <img src="../../../_static/logowhite.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes/index.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Architecture and Design</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introduction/swcs_introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/overall_architecture.html">2. Overall Architecture</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../tcs_introduction.html">3. Telescope Control System</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../tcs_introduction.html#subsystems">3.1. Subsystems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tcs_introduction.html#degrees-of-freedom">3.2. Degrees of Freedom</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tcs_introduction.html#requirements-on-tcs-pointing-tracking-guiding">3.3. Requirements on TCS, Pointing, Tracking &amp; Guiding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tcs_introduction.html#pointing-kernel">3.4. Pointing Kernel</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../tcs_introduction.html#wavefront-control">3.5. Wavefront Control</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="ns_obsmode.html">3.5.1. <em>Natural Seeing Observing Mode</em></a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">3.5.2. <em>Natural Guide Star Adaptive Optics (NGSAO)</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="ltao_obsmode.html">3.5.3. <em>Laser Tomographic Adaptive Optics (LTAO)</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="nglao_obsmode.html">3.5.4. <em>Natural-Guidestar Ground Layer Adaptive Optics (NGLAO)</em></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/observatory_operations.html">4. Observatory Operation System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../services/observatory_services.html">5. Observatory Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../frameworks/component_frameworks.html">6. Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../platform/platform.html">7. Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../process/process_introduction.html">8. Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../risks/risks.html">9. Software and Control Risks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../bibliography/bibliography.html">10. Bibliography</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../SWC_standards/index.html">Software and Controls Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../software_development/index.html">Software Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data_products/index.html">Data Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/swc_sys_glossary.html">Software and Controls Acronyms and Definitions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">GMT Software And Controls</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Architecture and Design</a> &raquo;</li>
      
          <li><a href="../tcs_introduction.html">3. Telescope Control System</a> &raquo;</li>
      
    <li>3.5.2. <em>Natural Guide Star Adaptive Optics (NGSAO)</em></li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="natural-guide-star-adaptive-optics-ngsao">
<span id="tcs-ngsao-obsmode"></span><h1>3.5.2. <em>Natural Guide Star Adaptive Optics (NGSAO)</em><a class="headerlink" href="#natural-guide-star-adaptive-optics-ngsao" title="Permalink to this headline">¶</a></h1>
<p>A simplified block diagram of the NGSAO WFC is presented in <a class="reference internal" href="#ngsao-wfcs-bd-simple"><span class="std std-numref">Figure
21</span></a>. There are six main control loops operating
simultaneously:</p>
<blockquote>
<div><ol class="upperalpha simple">
<li>The NGSAO Wavefront Controller controls the ASM based on NGWS measurements.</li>
<li>The NGSAO Wavefront Controller updates the slope zero-points of the NGWS to
correct any aberrations measured by the OIWFS.</li>
<li>The M1 and M2 Edge Sensors control the relative positions of the M1 and M2
outer segments with respect to the center segments.</li>
<li>The Phasing Controller updates the M1 edge sensor setpoints based on the
average ASM segment piston.</li>
<li>The Active Optics Wavefront Controller controls field-dependent aberrations
based on AGWS measurements.</li>
<li>The Pupil Motion Controller adjusts the tilt of M3 to maintain the pupil
centered on the instrument.</li>
</ol>
</div></blockquote>
<p>In addition to these main feedback loops, there are several offloads between
controllers. For example the NGSAO Wavefront Controller offloads the
time-average segment piston and tilt to the Phasing Controller, and the average
surface figure of the ASM to the Active Optics Wavefront Controller.</p>
<div class="figure" id="id10">
<span id="ngsao-wfcs-bd-simple"></span><a class="reference internal image-reference" href="../../../_images/ngsao_wfcs_block_diagram.png"><img alt="../../../_images/ngsao_wfcs_block_diagram.png" src="../../../_images/ngsao_wfcs_block_diagram.png" style="width: 918.0px; height: 488.0px;" /></a>
<p class="caption"><span class="caption-number">Fig. 21 </span><span class="caption-text">NGSAO Wavefront Control System Simplified Block Diagram</span></p>
</div>
<p><a class="reference internal" href="#ngsao-wfcs-bd-detailed"><span class="std std-numref">Figure 22</span></a> presents a more detailed block
diagram of the NGSAO WFC, with all of the real-time components currently
envisioned. External components with interfaces to the WFC (e.g., sensor slope
processors and mirror controllers) are also represented. Ports are identified
with the input or output data type, and data flow with arrows. Telemetry is not
explicitly shown, as it is provided as a system service to every component.</p>
<div class="figure" id="id11">
<span id="ngsao-wfcs-bd-detailed"></span><a class="reference internal image-reference" href="../../../_images/ngsao_wfcs_block_diagram_detailed.png"><img alt="../../../_images/ngsao_wfcs_block_diagram_detailed.png" src="../../../_images/ngsao_wfcs_block_diagram_detailed.png" style="width: 1461.0px; height: 846.0px;" /></a>
<p class="caption"><span class="caption-number">Fig. 22 </span><span class="caption-text">NGSAO Wavefront Control System Detailed Block Diagram</span></p>
</div>
<p>A list of the NGSAO WFC components is provided in Table 10-23 [TBA]. A
description of the most critical components is given below, followed by an
identification of the connections between them.</p>
<p>Note that wavefront aberrations have been identified using the following
nomenclature:</p>
<blockquote>
<div><ul class="simple">
<li>Global aberrations are defined over the full GMT pupil, while segment
aberrations are defined over each segment.</li>
<li>System aberrations represent a measurement of the full telescope optical
system, while M1, ASM, etc., aberrations represent only the contribution of
one optical surface.</li>
<li>Temporal averages of an aberration are identified as aberration_av.</li>
</ul>
</div></blockquote>
<p>At the present time, Zernike polynomials <a class="reference internal" href="../../bibliography/bibliography.html#noll76" id="id1">[Noll76]</a> are used as the basis set
throughout the WFC (with the exception of ASM and M1 figure control) due to
their simple relationship to rigid body motions. Karhunen-Loeve modes which
replicate Zernike modes in the low orders may be considered in the future.</p>
<p><strong>NGSAO Wavefront Controller</strong></p>
<blockquote>
<div><p>The NGSAO Wavefront Controller (<em>wfc_ngsao_ctrl</em>) converts the pyramid WFS
signals sent by the NGWS Slope Processor (<em>ngws_sp</em>) to an actuator command
vector destined for the ASM Controller. The algorithms of this primary
control loop are described in detail in Section 8.8.1 <a class="reference internal" href="../../bibliography/bibliography.html#bouc13b" id="id2">[Bouc13b]</a>. As the
interface to the ASM Controller is in terms of absolute actuator position,
the <em>wfc_ngsao_ctrl</em> component provides the integrator and must receive the
actuator position after the previous step by the ASM. Maintaining the last
commanded position in memory is not sufficient, due to the safety checks and
clipping performed by the ASM global controller. This architecture has been
selected primarily for consistency with the LTAO/NGLAO pseudo-open loop
control strategy.</p>
<p>In addition to the primary control loop, the <em>wfc_ngsao_ctrl</em> component
performs several offloads to other WFC components at ≤1 Hz, calculated by
projecting the time-averaged difference between the ASM actuator positions
and their calibrated &#8220;flat&#8221; positions onto various modes:</p>
<blockquote>
<div><ul class="simple">
<li>Segment piston and tilt are sent to the Phasing Controller.</li>
<li>Global tilt is sent to the pointing kernel and used as the telescope
guiding error.</li>
<li>Global Zernike modes Z4, Z7, and Z8 (focus and coma) are sent to the
Active Optics Wavefront Controller, and used to reposition the ASM.</li>
<li>M1 segment bending modes <a class="reference internal" href="../../bibliography/bibliography.html#smit13" id="id3">[Smit13]</a> 1-45 are sent to the Active Optics
Wavefront Controller, used to offload any M1 figure errors that have
been compensated by the ASM.</li>
</ul>
</div></blockquote>
<p>The wfc_ngsao_ctrl component receives residual error measurements from the
OIWFS Slope Processor, allowing it to compensate changing non-common path
(NCP) wavefront error. While it is typical in current-generation AO systems
to perform the high-order NCP calibration in daytime, dynamic calibration
will be necessary in the NGSAO and LTAO modes due to the rotation of the
pupil on the Instrument Window, which will be distorted by varying
atmospheric pressure (see Section 8.5.1.1 <a class="reference internal" href="../../bibliography/bibliography.html#bouc13b" id="id4">[Bouc13b]</a>). Observations of a
non-sidereal science target using a nearby fixed NGS will suffer from
additional varying NCP aberrations as the NGS footprint tracks across the
Instrument Window.</p>
<p>Tilt and focus flexure compensation will typically be performed at &lt;1 Hz,
and any faster input data stream will be averaged down. These modes will be
sent to the NGWS Supervisor component for correction by the translation
stages or modulation mirror. NGWS slope zeropoints will be updated at &lt;0.1
Hz. The wfc_ngsao_ctrl component must rotate the instrument aberrations to
the NGWS reference frame, and convert them to an offset in the Sx and Sy
signals. This offset is then added to an offset buffer in the ngws_sp
component.</p>
<p>The input and output ports of the wfc_ngsao_ctrl component are listed in
Table 10-24 [TBA].</p>
</div></blockquote>
<p><strong>Active Optics Wavefront Controller (NGSAO Mode)</strong></p>
<blockquote>
<div><p>The Active Optics Wavefront Controller (<em>wfc_aco_ctrl</em>) is responsible for
maintaining the collimation and focus of the telescope, and controlling the
figure of the M1 segments. While the NGWS and ASM minimize the wavefront
error on-axis, the AGWS will detect any off-axis aberrations resulting from
M1 figure errors being corrected at M2, and vice versa.</p>
<p>The inputs to the <em>wfc_aco_ctrl</em> component are the AGWS centroids, offloads
from the NGSAO Wavefront Controller, and a reconstructor matrix. The four
AGWS probes can each be configured in any of 3 modes, measuring system
global tilt, system segment tilt, or 25×25 Shack- Hartmann centroids. In the
NGSAO mode, one probe would typically be configured to measure global tilt
(used for acquisition, but ignored thereafter), and three probes configured
as Shack-Hartmann sensors to control field-dependent aberrations and GIR
rotation. The AGWS WFS centroid vector is multiplied by a reconstructor
matrix to derive the coefficients of various output modes, which correspond
to degrees of freedom of the available optical compensators. The controlled
modes are listed in Table 10-25 [TBA], and in the general case include M2
segment and global rigid body motions, M1 global tilt, and up to 45 bending
modes of each M1 segment. Updates to the AGWS probe position and GIR
rotation angle are also computed.</p>
<p>In the NGSAO and LTAO modes the <em>wfc_aco_ctrl</em> component maintains the ASM
actuators near mid-range by adjusting telescope collimation and focus (M2
global rigid body motion), but does not control M2 segment rigid body
motions. Doing so could compromise the phasing of the segments, which are
instead controlled directly by the M2 Edge Sensors.</p>
<p>The <em>wfc_aco_ctrl</em> component also corrects field-dependent aberrations not
detected by the AO wavefront sensors. If the ASM internal metrology were
perfect, then the offload of the average actuator positions projected onto
the M1 segment bending modes should leave the ASM with the ideal shape over
long timescales. However, any reference body flexure or drift in the
internal capacitive sensors will lead to quasi-static aberrations on the ASM
face sheets with compensating aberrations on the M1 segments, resulting in
field-dependent aberrations. Simulations of the WFC demonstrate that
low-order aberrations up to Z10 can be distinguished between M1 and M2
segments with 3 AGWS WFS (see Section 6.12.2.5 <a class="reference internal" href="../../bibliography/bibliography.html#john13" id="id5">[John13]</a>). The
<em>wfc_aco_ctrl</em> component will correct these by applying a fixed offset to
the M1 segment figure and telescope pointing. This is mathematically
equivalent to updating the ASM reference shape and allowing the ASM to
offload to this new shape.</p>
<p>The outputs of the <em>wfc_aco_ctrl</em> component are offset commands to the M1
and M2 optics controllers (<em>m1_optics_ctrl</em> and <em>m2_optics_ctrl</em>), and
updates to the pointing kernel, which control the AGWS probe locations and
GIR angle.</p>
</div></blockquote>
<p><strong>AO Phasing Controller (NGSAO Mode)</strong></p>
<blockquote>
<div><p>The Phasing Controller (<em>wfc_phasing_ctrl</em>) in the NGSAO mode provides updates
to the M1 and M2 edge sensor control points. The relative position and tilt
of the M1 and M2 segments is controlled at low bandwidth (&lt;1 Hz) by the M1
and M2 edge sensors in closed loop with the M1 and M2 segment positioners.
Meanwhile, the NGWS detects any residual segment piston and tilt at high
bandwidth (&gt;&gt;10 Hz), and compensates this error with the ASM actuators. The
role of the <em>wfc_phasing_ctrl</em> component in the NGSAO mode is therefore only
to offload the time- average segment piston and segment tilt from the ASM
actuators to the edge sensor setpoints.</p>
<p>Since the NGWS sees only the system segment piston and tilt error, it is not
possible to determine whether it is M1 or M2 that has caused it. Offloading
small amounts (microns) of segment piston to the wrong mirror has no
negative impact, but segment tilt on the wrong mirror will cause field-
dependent segment piston (see Section 8.1.5 <a class="reference internal" href="../../bibliography/bibliography.html#bouc13b" id="id6">[Bouc13b]</a>). We expect the M2ES
to be an order of magnitude more stable than the M1ES over long timescales,
due to their construction of Zerodur and the lower sensitivity of capacitive
sensors to environmental effects. The time-averaged ASM segment piston and
tilt will therefore be offloaded to the M1ES setpoints, with the M2ES left
unchanged.</p>
<p>The input and output ports of the wfc_phasing_ctrl component are listed in
Table 10-26 [TBA]. The ports used in the NGSAO mode are identified in the
last column.</p>
</div></blockquote>
<p><strong>Deployment</strong></p>
<blockquote>
<div><p>A representation of the deployment locations of the NGSAO WFC is provided in
<a class="reference internal" href="#ngsao-wfcs-deployment-diagram"><span class="std std-numref">Figure 23</span></a>. Most WFCS software
components run on standardized rack-mounted servers in the Electronics Room
of the Summit Support Building. The two exceptions which require specialized
hardware are the ASM Master Control Unit crate on which the ASM Controller
runs, and the AO Real-time Computer System (AORTS) which includes the NGSAO
Wavefront Controller.</p>
<p>The current baseline design calls for a single AORTS (identified as wfc_rts
in <a class="reference internal" href="#ngsao-wfcs-deployment-diagram"><span class="std std-numref">Figure 23</span></a>) to be re-used for
all the observing modes. The RTS will likely be composed of multiple server
nodes in a small high-performance computing cluster (see Section 8.8.4
<a class="reference internal" href="../../bibliography/bibliography.html#bouc13b" id="id7">[Bouc13b]</a>), and a smaller number of computing nodes might be used in the
less demanding modes (e.g., NGLAO).</p>
<div class="figure" id="id12">
<span id="ngsao-wfcs-deployment-diagram"></span><a class="reference internal image-reference" href="../../../_images/ngsao_wfcs_deployment_diagram.png"><img alt="../../../_images/ngsao_wfcs_deployment_diagram.png" src="../../../_images/ngsao_wfcs_deployment_diagram.png" style="width: 1484.0px; height: 717.0px;" /></a>
<p class="caption"><span class="caption-number">Fig. 23 </span><span class="caption-text">NGSAO wavefront control system deployment diagram</span></p>
</div>
</div></blockquote>
<p><strong>Simulations</strong></p>
<blockquote>
<div>No complete simulations of the NGSAO wavefront control system with all of
the control loops presented in this section have yet been performed.
However, the fast NGSAO control loop (Loop A, see Section 8.8.1 <a class="reference internal" href="../../bibliography/bibliography.html#bouc13b" id="id8">[Bouc13b]</a>),
the edge sensor and Phasing Controller behavior (Loops C and D, see Section
10.3.2.5.3.3), and the interaction between the active optics controller and
NGSAO/LTAO on-axis wavefront compensation (Loop E) described in this section
have been independently simulated. Active Optics Controller simulations can
be found in Section 6.12.2.5 <a class="reference internal" href="../../bibliography/bibliography.html#john13" id="id9">[John13]</a>.</div></blockquote>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ltao_obsmode.html" class="btn btn-neutral float-right" title="3.5.3. Laser Tomographic Adaptive Optics (LTAO)" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ns_obsmode.html" class="btn btn-neutral" title="3.5.1. Natural Seeing Observing Mode" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.1-5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>