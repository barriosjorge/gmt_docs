

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>8.5. Networking &mdash; GMT Software And Controls documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/additional_style.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="GMT Software And Controls documentation" href="../../index.html"/>
        <link rel="up" title="8. Platform" href="platform.html"/>
        <link rel="next" title="8.6. Software Development Platform" href="software_development.html"/>
        <link rel="prev" title="8.4. Distributed Communications - Middleware" href="distributed_communications.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GMT Software And Controls
          

          
            
            <img src="../../_static/logowhite.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../release_notes/index.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Architecture and Design</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction/swcs_introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../requirements/requirements.html">2. Requirements Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture/overall_architecture.html">3. Overall Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operations/observatory_operations.html">4. Observatory Operation System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tcs/tcs_introduction.html">5. Telescope Control System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services/observatory_services.html">6. Observatory Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/component_frameworks.html">7. Frameworks</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="platform.html">8. Platform</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="computing.html">8.1. Computing Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="field_device_interface_technology.html">8.2. Field Device Interface Technology</a></li>
<li class="toctree-l3"><a class="reference internal" href="time_distribution_system.html">8.3. Time Distribution System</a></li>
<li class="toctree-l3"><a class="reference internal" href="distributed_communications.html">8.4. Distributed Communications - Middleware</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">8.5. Networking</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#control-network">8.5.1. <em>Control Network</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#ultra-low-latency-network">8.5.2. <em>Ultra-Low Latency Network</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#benchmark-tests">8.5.3. <em>Benchmark Tests</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="software_development.html">8.6. Software Development Platform</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../process/process_introduction.html">9. Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../risks/risks.html">10. Software and Control Risks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/bibliography.html">11. Bibliography</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../SWC_standards/index.html">Software and Controls Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_development/index.html">Software Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_products/index.html">Data Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/swc_sys_glossary.html">Software and Controls Acronyms and Definitions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GMT Software And Controls</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Architecture and Design</a> &raquo;</li>
        
          <li><a href="platform.html">8. Platform</a> &raquo;</li>
        
      <li>8.5. Networking</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="networking">
<span id="id1"></span><h1>8.5. Networking<a class="headerlink" href="#networking" title="Permalink to this headline">¶</a></h1>
<p>Telescope Control Systems span a large dynamic range in bandwidth and latency
requirements. Most systems have fairly relaxed requirements on bandwidth and
latency, e.g., the telescope main axis require few parameters to update at
nominally 20 Hz, which is easily handled by off-the-shelf Ethernet components. A
few other systems such as wavefront control and Adaptive Optics run at kHz
regime, shuffling orders of magnitude larger data volume in real time to read
out telemetry and WFS, computing wavefront slopes, commanding ASMs, etc.</p>
<p>The global trend in High Performance Computing and Ethernet communications
drives rapid developments in the industry, somewhat comparable to CPUs (Moore&#8217;s
law) seen in the previous decade. The emphasis on inter-connected cloud
computing, and the ever-growing bandwidth and low latency requirements, continue
to drive the technology today. Recent trends from high performance computing
community, coupled with cost-benefit components, point to Infiniband* as a safe
choice in the present and for future growth.</p>
<div class="section" id="control-network">
<h2>8.5.1. <em>Control Network</em><a class="headerlink" href="#control-network" title="Permalink to this headline">¶</a></h2>
<p>The GMT control network design is based on an Ethernet switched-fabric topology
that eliminates the existence of single point failures. The control network is
the backbone that communicates with any subsystem of the Telescope. It connects
the control room, the electronics room (where most of the computers are
located), and all field interface modules installed on the telescope structure.
The network is deployed using optical fiber trunk cables between the telescope
enclosure base and the facility building. The <a class="reference internal" href="../architecture/health_supervision.html#figure-supervisory-hierarchy"><span class="std std-ref">Supervisory Hierarchy Figure</span></a> and Figure 10-26 (TBC) illustrate the conceptual
design of the control network.</p>
<p>Networking equipment evolves rapidly, thus it is advisable to wait as close as
possible to the deployment phase for final procurement. In this early stage of
the project a Gigabit Ethernet network is used to prototype the communication
system. This prototype will evolve during the life of the project to track
technology evolution and to optimize the final network design.</p>
<table border="1" class="docutils" id="id2">
<caption><span class="caption-number">Table 8.8 </span><span class="caption-text">SWCS Networking Requirements (Level 3)</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><div class="first last line-block">
<div class="line">Requirement</div>
</div>
</th>
<th class="head"><div class="first last line-block">
<div class="line">Statement</div>
</div>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Communication Standards</div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">SWCS shall define a set of physical communication protocols</div>
<div class="line">to integrate its different components.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Communication Protocols</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">SWCS shall define a set of software protocols and APIs that</div>
<div class="line">allow the communication with the required performance</div>
<div class="line">between different components.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Network Access</div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Support telescope operation, the specified operating modes</div>
<div class="line">and data transfer rates as required.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">General Network</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Provide a low latency and control network.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Storage Network</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Provide a high bandwidth storage network.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Ultra-Low Latency Bus</div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Provide ultra-low latency, high bandwidth communication bus.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="ultra-low-latency-network">
<h2>8.5.2. <em>Ultra-Low Latency Network</em><a class="headerlink" href="#ultra-low-latency-network" title="Permalink to this headline">¶</a></h2>
<p>A low latency, high bandwidth, and scalable, communication backbone is a
prerequisite for the design of a modular adaptive and active wavefront control
system. For this purpose, a 40 Gbps Infiniband network has been tested in the
lab. The tests include a combination of high bandwidth middleware, Infiniband
uverbs, MPI† (Message Passing Interface) and RDMA‡ (Remote Direct Memory Access)
on a mini-cluster setup. Preliminary results show that existing ultra-low
latency, off-the-shelf, communication products provide the required performance
out of the box.</p>
<p>Infiniband support was originally provided by the OpenFabrics Enterprise
Distribution. Now the support has been merged into the upstream Linux kernel.
User-space support packages (e.g., subnet manager and performance tools) are
made available through regular distribution channels. Infiniband implements the
following key features:</p>
<blockquote>
<div><ul class="simple">
<li>Kernel bypass – Removes the need for context switches between kernel and
user-space.</li>
<li>RDMA enabled – Application can post commands directly to the host adapter
eliminating expensive calls and associated (latency) overheads of going
through an OS stack.</li>
<li>Zero copy – Eliminates buffering and allows direct access on remote servers,
significantly reducing latency.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="benchmark-tests">
<h2>8.5.3. <em>Benchmark Tests</em><a class="headerlink" href="#benchmark-tests" title="Permalink to this headline">¶</a></h2>
<p>A test environment was deployed consisting three hosts interconnected with an
8-port 40 Gb/s switch, using the following components:</p>
<blockquote>
<div><ul class="simple">
<li>Mellanox ConnectX-2 Single 4x QSFP 40Gb/s ($562.00/unit)</li>
<li>Mellanox Infiniscale IV QDR 8-port switch ($1,750.00)</li>
</ul>
</div></blockquote>
<p>The set-up is shown in the Figure below. On the left the entire computer cabinet
can be seen including the Mellanox switch on top and the Linux machines at the
bottom. A close-up on the Mellanox switch is depicted on the right.</p>
<blockquote>
<div></div></blockquote>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="58%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="../../_images/ultra_low_latency_networking1.png"><img alt="ULL_figure1" class="align-middle" src="../../_images/ultra_low_latency_networking1.png" style="width: 381.0px; height: 401.0px;" /></a></td>
<td><a class="reference internal" href="../../_images/ultra_low_latency_networking2.png"><img alt="ULL_figure2" class="align-top" src="../../_images/ultra_low_latency_networking2.png" style="width: 538.0px; height: 401.0px;" /></a></td>
</tr>
</tbody>
</table>
<p>Measured latency (typical and worst-case) as a function of the payload size in
bytes is shown in the Figure below. This benchmark used Reliable Connection
single queued pairs. As advertised, the typical latency for data write, send,
and read is 1-2 μs for payloads &lt;256 bytes, increasing to ~8 μs for payloads of
~16 kB, such as an ASM command vector.</p>
<div class="figure" id="id3">
<img alt="../../_images/latency_vs_payload.png" src="../../_images/latency_vs_payload.png" />
<p class="caption"><span class="caption-number">Fig. 8.9 </span><span class="caption-text">Measured Latency vs. Payload</span></p>
</div>
<p>Another benchmark test was run, this time for latency jitter using again
Reliable Connection single queued pairs.  As shown in the Figure below, for
small message sizes (2 bytes), &lt;0.1% of messages have a latency exceeding 3 μs.
Both tests were run under a mainstream Linux kernel, RT_PREEMPT and RTAI, giving
similar numbers independently of the platform.</p>
<div class="figure" id="id4">
<img alt="../../_images/latency_distribution.png" src="../../_images/latency_distribution.png" />
<p class="caption"><span class="caption-number">Fig. 8.10 </span><span class="caption-text">Latency Distribution</span></p>
</div>
<p>The evaluation of Infiniband shows that the technology can be easily deployed at
relatively low cost.  The performance measured agrees with the vendor advertised
capabilities without the need for specific or complex tuning.  While the verb
API is very specific to RDMA, it is well documented, and most of the complexity
stems from connection management, which can be leveraged using helper libraries
(<em>rdma_cm</em> or other out-of-band mechanism).</p>
<p>The technology is already widely deployed and mainstream in the high performance
computing community.  Driven by community needs, process improvement is under
active development and there is every expectation that new products will improve
substantially in performance in near future.</p>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="software_development.html" class="btn btn-neutral float-right" title="8.6. Software Development Platform" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="distributed_communications.html" class="btn btn-neutral" title="8.4. Distributed Communications - Middleware" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.1-5',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>